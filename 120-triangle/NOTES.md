Solved using dp with both o(n) and o(n*n) extra space.